import {meta} from '../../lib/blog-posts'
import BlogLayout from '../../components/blog-layout/blog-layout'
import SyntaxHighlighter from 'react-syntax-highlighter';

In this article I want to discuss the advantages of developing a microservice over a monolithic architecture and how I used it. 
I won't get into the technical stack details as I want to keep this simple for any type of skilled developer.

I recently implemented a newsletter subsription feature on fitvitness.com. Site needs to accumulates user's emails using a 3rd party service 
called MailChimp. MailChimp, for thos eof you don't know, is a service that allows sites to gather emails and send newsletters directly to your subscriber's email inbox. 
A newsletter section is an interesting marketing strategy to gather future clients and build a community that are highly interested in your product.



## Overview Site Architecture

FitVitFitness.com is based on Next.js which I chose to export all static html, css and javscript files, and deployed to Firebase Hosting. 
I wrote an article about this if your curious and want more details about it [here](https://jgsolutions.ca/posts/fitvitfitness-portfolio/).

Basically the site has no commication to any server or even rendered by a server. To implement this newsletter feature I needed the site to 
communicate directly to Mailchimp. But making requests from a browser, security errors will occur which are called 
CORS [Cross-Origin Resource Sharing](https://developer.mozilla.org/en-US/docs/Web/HTTP/CORS).

Of course I needed to rethink how to architect the site from communicating with MailChimp or even other services needed in the future. 

## Discuss the choice made between Microservice & Monolithic

## Technical Specs of Microservice

To overcome this solution I needed to create a Mircoservice. Basically a backend server sending requests to the MailChimp server.

The microservice I developed is based on Node.js deployed to Firebase Cloud Functions. Express.js is also used sets up all the routes that my site will request. 

So the question is why does my site allow server requests but not the MailChimp? By default, browsers restrict cross-origin HTTP requests initiated from scripts. 
For example, XMLHttpRequest and the Fetch API follow the same-origin policy. This means that a web application or site using those APIs can only request resources from the same origin (or same domain) the application was loaded from.

Since I created my own microservice I can allow any requests from any domain by setting up the right CORS headers

Show an example

## Advantages

## Disadvantages

## Final Thoughts

export default ({ children }) => <BlogLayout meta={meta['microservices-architecture-over-monolithic']}>{children}</BlogLayout>
